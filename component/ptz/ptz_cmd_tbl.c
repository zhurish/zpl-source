#include "auto_include.h"
#include <zplos_include.h>
#include "lib_include.h"

#include "ptz_cmd.h"
#include "ptz_serial.h"


typedef struct 
{
    zpl_uint8       set;            //设置=1，调用=2
	zpl_uint8       id;             //预置号
    zpl_uint8       len;            //命令长度
    zpl_uint8       cmd_data[8];    //命令数据
} ptz_cmd_t;

static ptz_cmd_t ptz_cmd_dtbl[] = 
{
    {1, 15, 7, {0xff,0x01, 0x00, 0x03, 0x00, 0x0f, 0x13, 0x00}},  //
    {2, 15, 7, {0xff,0x01, 0x00, 0x07, 0x00, 0x0f, 0x17, 0x00}},  //
    {1, 40, 7, {0xff,0x01, 0x02, 0xff, 0x07, 0x01, 0x0a, 0x00}},  //
    {2, 40, 7, {0xff,0x01, 0x02, 0xff, 0x07, 0x00, 0x09, 0x00}},  //

    {1, 63, 7, {0xff,0x01, 0x02, 0xff, 0x1e, 0x01, 0x21, 0x00}},  //自动扫描时的左限位
    {2, 64, 7, {0xff,0x01, 0x02, 0xff, 0x1f, 0x01, 0x22, 0x00}},  //自动扫描时的左限位
    {1, 64, 7, {0xff,0x01, 0x20, 0x00, 0x00, 0x00, 0x21, 0x00}},  //打开自动扫描功能
    {1, 64, 7, {0xff,0x01, 0x00, 0x07, 0x00, 0x63, 0x6b, 0x00}},  //开始自动扫描
    {1, 96, 7, {0xff,0x01, 0x00, 0x07, 0x00, 0x60, 0x68, 0x00}},  //停止自动扫描
};
/*
PELCO-D:
以地址码0x01为例：
  {0xff,0x01,0x00,0x08,0x00,0xff,0x08,}//上
  {0xff,0x01,0x00,0x10,0x00,0xff,0x10,}//下
  {0xff,0x01,0x00,0x04,0xff,0x00,0x04,}//左
  {0xff,0x01,0x00,0x02,0xff,0x00,0x02,}//右
  {0xff,0x01,0x00,0x20,0x00,0x00,0x21,}//变倍短
  {0xff,0x01,0x00,0x40,0x00,0x00,0x41,}//变倍长
  {0xff,0x01,0x00,0x80,0x00,0x00,0x81,}//聚焦近
  {0xff,0x01,0x01,0x00,0x00,0x00,0x02,}//聚焦远
  {0xff,0x01,0x02,0x00,0x00,0x00,0x03,}//光圈小
  {0xff,0x01,0x04,0x00,0x00,0x00,0x05,}//光圈大
  {0xff,0x01,0x00,0x0b,0x00,0x01,0x0d,}//灯光关
  {0xff,0x01,0x00,0x09,0x00,0x01,0x0b,}//灯光开
  {0xff,0x01,0x00,0x07,0x00,0x01,0x09,}//转至预置点001
  {0xff,0x01,0x00,0x03,0x00,0x01,0x05,}//设置预置点001
  {0xff,0x01,0x00,0x05,0x00,0x01,0x07,}//删除预置点001
  以上对应的停命令均是:
  {0xff,0x01,0x00,0x00,0x00,0x00,0x01,}//停命令

PELCO-P: 
  以地址码0x01为例：
  {0xa0,0x01,0x00,0x08,0x00,0x30,0xaf,0x39,}//上
  {0xa0,0x01,0x00,0x10,0x00,0x30,0xaf,0x21,}//下
  {0xa0,0x01,0x00,0x04,0x10,0x00,0xaf,0x15,}//左
  {0xa0,0x01,0x00,0x02,0x10,0x00,0xaf,0x13,}//右
  {0xa0,0x01,0x00,0x20,0x00,0x00,0xaf,0x41,}//变倍短
  {0xa0,0x01,0x00,0x40,0x00,0x00,0xaf,0x21,}//变倍长
  {0xa0,0x01,0x02,0x00,0x00,0x00,0xaf,0x03,}//聚焦近
  {0xa0,0x01,0x01,0x00,0x00,0x00,0xaf,0x00,}//聚焦远
  {0xa0,0x01,0x08,0x00,0x00,0x00,0xaf,0x09,}//光圈小
  {0xa0,0x01,0x04,0x00,0x00,0x00,0xaf,0x05,}//光圈大
  无命令字发送//灯光关
  无命令字发送//灯光开
  {0xa0,0x01,0x00,0x96,0x00,0x20,0xaf,0xb7,}//自动巡航
  {0xa0,0x01,0x00,0x99,0x00,0x20,0xaf,0xb8,}//关闭自动巡航
  {0xa0,0x01,0x00,0x07,0x00,0x01,0xaf,0x07,}//转至预置点001
  {0xa0,0x01,0x00,0x03,0x00,0x01,0xaf,0x03,}//设置预置点001
  {0xa0,0x01,0x00,0x05,0x00,0x01,0xaf,0x01,}//删除预置点001
  以上对应的停命令均是（上下左右、变倍、聚焦、光圈均有停命令）:
  {0xa0,0x01,0x00,0x00,0x00,0x00,0xaf,0x01,}
*/

/* D
command            byte3   byte4   byte5   byte6
set preset          0x00    0x03    0x00    0x01-0x20
clr preset          0x00    0x05    0x00    0x01-0x20
call preset         0x00    0x07    0x00    0x01-0x20
Flip(180.)          0x00    0x07    0x00    0x21
go to zero pan      0x00    0x07    0x00    0x20
set auxiliary       0x00    0x09    0x00    0x01-0x08
clear auxiliary     0x00    0x0b    0x00    0x01-0x08
remote reset        0x00    0x0f    0x00    0x00
set zone start      0x00    0x11    0x00    0x01-0x08
set zone stop       0x00    0x13    0x00    0x01-0x08
write char to screen0x00    0x15    0x00-0x28    ASCII Value
clear screen        0x00    0x17    0x00    0x00
Alarm ACK           0x00    0x19    0x00    no
zone scan on        0x00    0x1b    0x00    0x00
zone scan off       0x00    0x1d    0x00    0x00
set pattern start   0x00    0x1f    0x00    0x00
set pattern stop    0x00    0x21    0x00    0x00
run pattern         0x00    0x23    0x00    0x00
set zone speed      0x00    0x25    0x00    0x00-0x03
set focus speed     0x00    0x27    0x00    0x00-0x03


P
command            byte3   byte4   byte5   byte6
set preset          0x00    0x03    0x00    0x01-0xff
clr preset          0x00    0x05    0x00    0x01-0xff
call preset         0x00    0x07    0x00    0x01-0xff
Flip(180.)          0x00    0x07    0x00    0x21
go to zero pan      0x00    0x07    0x00    0x22
set auxiliary       0x00    0x09    0x00    0x01-0x08
clear auxiliary     0x00    0x0b    0x00    0x01-0x08
remote reset        0x00    0x0f    0x00    0x00
set zone start      0x00    0x11    0x00    0x01-0x08
set zone stop       0x00    0x13    0x00    0x01-0x08
write char to screen0x00    0x15    0x00-0x28    ASCII Value
clear screen        0x00    0x17    0x00    0x00
Alarm ACK           0x00    0x19    0x00    no 0x01-0x08
zone scan on        0x00    0x1b    0x00    0x00
zone scan off       0x00    0x1d    0x00    0x00
set pattern start   0x00    0x1f    0x00    0x00
set pattern stop    0x00    0x21    0x00    0x00
run pattern         0x00    0x23    0x00    0x00
set zone speed      0x00    0x25    0x00    0x00-0x03
set focus speed     0x00    0x27    0x00    0x00-0x03



preset number:
99          begin auto-scan
98          begin frame scan
97          begin random scan
96          stop scan
95          enter menu mode
94          remote reset

93          set right limit stop
92          set left limit stop
34          home return to 0 pan position
33          flip
*/